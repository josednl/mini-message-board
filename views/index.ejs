<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title>Mini Messages Board</title>
		<link rel="stylesheet" href="/css/index.css" />
	</head>
	<body>
		<div class="container">
			<h1>ğŸ“¨ Messages</h1>

			<div class="actions">
				<a href="/new" class="btn-new">â• Add new message</a>
			</div>

			<ul class="message-list">
				<% messages.forEach(message => { %>
				<li class="message">
					<div class="message-content">
						<strong><%= message.user %>:</strong> <%= message.text
						%>
						<br />
						<small><%= message.added.toLocaleString() %></small>
					</div>
					<div class="message-actions">
						<a href="/messages/<%= message.id %>" class="btn-open">Open</a>
						<form
							action="/delete/<%= message.id %>"
							method="POST"
							class="delete-form"
						>
							<button type="submit" class="btn-delete">
								Delete
							</button>
						</form>
					</div>
				</li>
				<% }) %>
			</ul>
		</div>
	</body>
	<script>
		document.querySelectorAll('.delete-form').forEach((form) => {
			form.addEventListener('submit', (e) => {
				if (!confirm('Are you sure you want to delete this message?')) {
					e.preventDefault();
				}
			});
		});
	</script>
</html>
